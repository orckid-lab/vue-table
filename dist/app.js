!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n.n(r);Vue.component("vue-table",o.a)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function t(){r(this,t),this.attributes={downloads:[],uploads:[]}}s(t,[{key:"downloads",get:function(){return this.attributes.downloads}},{key:"uploads",get:function(){return this.attributes.uploads}}])}();e.default={props:n(3),data:function(){return{list:this.vueTable,downloads:[],uploads:[]}},computed:n(2),mounted:function(){var t=this;this.url&&axios(this.url).then(function(e){Object.assign(t.list,e.data)}),this.target&&axios.post(this.pagingUrl,{target:this.target}).then(function(e){Object.assign(t.list,e.data)})},methods:{isCurrentPage:function(t){return Number(t)===this.list.current_page},reload:function(){this.loadPage(this.list.ajax.url)},loadPage:function(t){var e=this;axios.post(e.pagingUrl,Object.assign({},e.list.ajax,{url:t})).then(function(t){Object.assign(e.list,t.data)})},download:function(){var t=this;$.post("/api/vue-table/download",Object.assign({},t.list.ajax),function(e){t.list=Object.assign(t.list,e);var n=e.export_id;t.downloads.push(o.a.create(n,e.download)),window.Echo.channel("download-progress-"+n).listen(".OrckidLab.VueTable.Events.VueTableDownloading",function(e){t.findDownload(n).first.status(e.progress)})},"json")},findDownload:function(t){return this.findProcess(t,"downloads")},findUpload:function(t){return this.findProcess(t,"uploads")},findProcess:function(t,e){var n=null,r=this[e].filter(function(e,r){if(e.id===t)return n=r,!0})[0];return{index:n,first:r}},deleteDownload:function(t){return this.deleteProcess(t,"downloads")},deleteUpload:function(t){return this.deleteProcess(t,"uploads")},deleteProcess:function(t,e){this[e].splice(this.findProcess(t,e).index,1)},upload:function(t){var e=this,n=t.target,r=new FormData(n);r.append("target",e.list.ajax.target);var s=e.uploadUrl,i=function t(n){var r=n.data,i=r.file_name;if(e.findUpload(i).first||e.uploads.push(o.b.create(i)),e.findUpload(i).first.status(r.progress).uploaded(r.rows.uploaded).failed(r.rows.failed),r.is_last)return e.reload(),!1;axios.post(s,n.data).then(t)};axios.post(s,r).then(i).catch(function(t){t.response?alert(t.response.data.header):t.request})},destroy:function(){axios.post(this.destroyUrl,this.list.ajax).then(function(){this.reload()}.bind(this))}}}},function(t,e){t.exports={hasResult:function(){return this.list.hasResult},labels:function(){return this.list.labels},columns:function(){return this.list.columns},rows:function(){return this.list.rows},hasPages:function(){return this.list.hasPagination},hasMorePages:function(){return this.list.current_page!==this.list.last_page},onFirstPage:function(){return 1===this.list.current_page},previousUrl:function(){return this.list.prev_page_url},nextUrl:function(){return this.list.next_page_url},pagination:function(){return this.list.pagination},showing:function(){return this.list.showing},total:function(){return this.list.total},title:function(){return this.list.title},supportsUpload:function(){return this.list.supports.upload},supportsDownload:function(){return this.list.supports.download},supportsDestroy:function(){return this.list.supports.destroy}}},function(t,e){t.exports={vueTable:{type:Object,default:function(){return{hasResult:!1,hasPagination:!1,columns:[],labels:[],rows:[],pagination:[],showing:0,title:"",ajax:{target:"",url:""},total:0,per_page:0,current_page:0,last_page:0,next_page_url:"",prev_page_url:"",from:0,to:0,data:[],supports:{download:!1,upload:!1,destroy:!1}}}},url:{type:String},target:{type:String},pagingUrl:{type:String,default:"/api/vue-table/page"},downloadUrl:{type:String,default:"/api/vue-table/download"},uploadUrl:{type:String,default:"/api/vue-table/upload"},destroyUrl:{type:String,default:"/api/vue-table/destroy"}}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return u}),n.d(e,"b",function(){return l});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){if(s(this,t),this===t)throw new TypeError("Cannot construct Abstract instances directly")}return i(t,[{key:"status",value:function(t){return this.progress=t,this}},{key:"completed",get:function(){return 100===this.progress}}],[{key:"create",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(this,[null].concat(e)))}}]),t}(),u=function(t){function e(t,n){s(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.id=t,o.path=n,o.progress=0,o}return o(e,t),e}(a),l=function(t){function e(t){s(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t,n.progress=0,n.rows={uploaded:[],failed:[]},n}return o(e,t),i(e,[{key:"uploaded",value:function(t){return this.rows.uploaded=this.rows.uploaded.concat(t),this}},{key:"failed",value:function(t){return this.rows.failed=this.rows.failed.concat(t),this}},{key:"totalUploaded",get:function(){return this.rows.uploaded.length}},{key:"totalFailed",get:function(){return this.rows.failed.length}},{key:"uploads",get:function(){return this.rows.uploaded}},{key:"errors",get:function(){return this.rows.failed}}]),e}(a)},function(t,e,n){var r=n(6)(n(1),n(7),null,null);t.exports=r.exports},function(t,e){t.exports=function(t,e,n,r){var o,s=t=t||{},i=typeof t.default;"object"!==i&&"function"!==i||(o=t,s=t.default);var a="function"==typeof s?s.options:s;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),n&&(a._scopeId=n),r){var u=Object.create(a.computed||null);Object.keys(r).forEach(function(t){var e=r[t];u[t]=function(){return e}}),a.computed=u}return{esModule:o,exports:s,options:a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{domProps:{innerHTML:t._s(t.title)}}),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.reload(e)}}},[t._v("Reload")]),t._v(" "),t.supportsDestroy?n("button",{attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.destroy(e)}}},[t._v("Delete all")]):t._e(),t._v(" "),t.hasResult?n("table",{staticClass:"table"},[n("thead",[n("tr",t._l(t.labels,function(e){return n("th",[n("abbr",{attrs:{title:e}},[t._v(t._s(e))])])}))]),t._v(" "),n("tfoot",[n("tr",t._l(t.labels,function(e){return n("th",[n("abbr",{attrs:{title:e}},[t._v(t._s(e))])])}))]),t._v(" "),n("tbody",t._l(t.rows,function(e){return n("tr",t._l(e,function(e){return n("td",{domProps:{innerHTML:t._s(e)}})}))}))],1):n("p",[t._v("No results found.")]),t._v(" "),t.hasPages?n("ul",{staticClass:"pagination"},[t.onFirstPage?n("li",{staticClass:"page-item disabled"},[n("span",{staticClass:"page-link"},[t._v("«")])]):n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:t.previousUrl,rel:"prev"},on:{click:function(e){e.preventDefault(),t.loadPage(t.previousUrl)}}},[t._v("«")])]),t._v(" "),t._l(t.pagination,function(e){return"string"==typeof e?n("li",{staticClass:"page-item disabled"},[n("span",{staticClass:"page-link"},[t._v(t._s(e))])]):t._l(e,function(e,r){return n("li",{staticClass:"page-item",class:{active:t.isCurrentPage(r)}},[t.isCurrentPage(r)?n("span",{staticClass:"page-link"},[t._v(t._s(r))]):n("a",{staticClass:"page-link",attrs:{href:e},on:{click:function(n){n.preventDefault(),t.loadPage(e)}}},[t._v(t._s(r))])])})}),t._v(" "),t.hasMorePages?n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:t.nextUrl,rel:"next"},on:{click:function(e){e.preventDefault(),t.loadPage(t.nextUrl)}}},[t._v("»")])]):n("li",{staticClass:"page-item disabled"},[n("span",{staticClass:"page-link"},[t._v("»")])])],2):t._e(),t._v(" "),t.supportsUpload?n("div",[n("form",{on:{submit:function(e){e.preventDefault(),t.upload(e)}}},[n("input",{attrs:{type:"file",name:"import"}}),t._v(" "),n("button",{attrs:{type:"submit"}},[t._v("Import")])]),t._v(" "),n("ul",t._l(t.uploads,function(e){return n("li",[n("span",[n("progress",{attrs:{max:"100",value:e.progress}}),t._v(t._s(e.progress)+"\n\t\t\t\t")]),t._v(" "),n("span",[t._v("Total uploaded: "+t._s(e.totalUploaded))]),t._v(" "),n("span",[t._v("Total failed records: "+t._s(e.totalFailed))]),t._v(" "),n("div",[n("ul",t._l(e.errors,function(e){return n("li",[t._v("\n\t\t\t\t\t\t\tThe row "+t._s(e.index)+" failed to upload.\n\t\t\t\t\t\t\t"),t._l(e.errors,function(e){return n("p",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t")])})],2)}))])])}))]):t._e()])},staticRenderFns:[]}},function(t,e,n){t.exports=n(0)}]);